<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="apple-touch-icon" href="icons/workout-icon-192.png">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Tracker PWA</title>
    <link rel="manifest" href="manifest.json">
    <style>
        :root { --primary: #2196F3; --bg: #f5f5f5; --card: #ffffff; --history-bg: #e3f2fd; --success: #4CAF50; --danger: #f44336; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); margin: 0; padding-bottom: 50px; }
        header { background: var(--primary); color: white; padding: 20px; text-align: center; font-weight: bold; font-size: 1.5rem; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .container { padding: 15px; max-width: 600px; margin: auto; }
        h2 { border-bottom: 2px solid var(--primary); padding-bottom: 5px; color: #333; }
        
        .controls { display: flex; gap: 10px; margin-bottom: 20px; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        input { flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        
        .exercise-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 30px; }
        .ex-btn { background: var(--success); color: white; border: none; padding: 15px; border-radius: 12px; font-weight: 600; cursor: pointer; transition: transform 0.1s, background 0.2s; box-shadow: 0 3px 6px rgba(0,0,0,0.1); }
        .ex-btn:active { transform: scale(0.95); }
        .ex-btn:hover { background: #45a049; }
        .weight-input { width: 60px; text-align: center; }

        .log-section { background: var(--card); padding: 15px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .history-section { background: var(--history-bg); padding: 15px; border-radius: 10px; }
        .entry { border-bottom: 1px solid #ddd; padding: 10px 0; display: flex; justify-content: space-between; align-items: center; }
        .entry:last-child { border: none; }
        .entry-meta { font-size: 0.85rem; color: #666; }
        
        .reset-btn { width: 100%; background: var(--danger); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; margin-top: 10px; cursor: pointer; }
    </style>
</head>
<body>

<header>MY WORKOUT LOG</header>

<div class="container">
    <div class="controls">
        <input type="time" id="workoutTime">
        <input type="number" id="workoutDuration" placeholder="Mins" value="45">
        <input type="number" id="currentWeight" step="0.5" value="10" class="weight-input"> <span style="align-self:center">kg</span>
    </div>

    <h3>Tap to Log Exercise</h3>
    <div class="exercise-grid" id="exerciseGrid"></div>

    <div class="log-section">
        <h2>Today's Workouts</h2>
        <div id="todayList"></div>
        <button class="reset-btn" onclick="resetToday()">Reset Today's Log</button>
    </div>

    <div class="history-section">
        <h2>History</h2>
        <div id="historyList"></div>
    </div>
</div>

<script>
    const exercises = [
        "Bicep Curl: 15×15×15", "Dumbbell Raise: 12×12×12", "Side Extension: 15+15", "Shrugs: 40 reps",
        "Back Row: 30+30", "Incline Shrugs: 40 reps", "Bicep Burnout: 50 reps", "Push-ups: 35×30×10",
        "Plank: 1m 30s", "Situps: 25×20", "Russian Twist: 25×25", "Knee Crunch: 50"
    ];

    let logs = JSON.parse(localStorage.getItem('workoutLogs')) || [];

    function init() {
        document.getElementById('workoutTime').value = new Date().toTimeString().slice(0,5);
        const grid = document.getElementById('exerciseGrid');
        exercises.forEach(ex => {
            const btn = document.createElement('button');
            btn.className = 'ex-btn';
            btn.innerText = ex;
            btn.onclick = () => addWorkout(ex);
            grid.appendChild(btn);
        });
        render();
    }

    function addWorkout(name) {
        const entry = {
            id: Date.now(),
            name: name,
            weight: document.getElementById('currentWeight').value,
            time: document.getElementById('workoutTime').value,
            duration: document.getElementById('workoutDuration').value,
            date: new Date().toLocaleDateString()
        };
        logs.push(entry);
        save();
    }

    function resetToday() {
        const today = new Date().toLocaleDateString();
        logs = logs.filter(log => log.date !== today);
        save();
    }

    function save() {
        localStorage.setItem('workoutLogs', JSON.stringify(logs));
        render();
    }

    function render() {
        const today = new Date().toLocaleDateString();
        const todayList = document.getElementById('todayList');
        const historyList = document.getElementById('historyList');
        
        todayList.innerHTML = '';
        historyList.innerHTML = '';

        logs.slice().reverse().forEach(log => {
            const html = `
                <div class="entry">
                    <div>
                        <strong>${log.name}</strong> @ ${log.weight}kg<br>
                        <span class="entry-meta">${log.time} (${log.duration} mins)</span>
                    </div>
                    <div class="entry-meta">${log.date}</div>
                </div>`;
            if(log.date === today) todayList.innerHTML += html;
            else historyList.innerHTML += html;
        });
    }

    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js');
    }

    init();
</script>
</body>
</html>
